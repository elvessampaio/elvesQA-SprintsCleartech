2023-10-10 15:29:53.354 -03:00 [INF] Inicialização da WEB API...
2023-10-10 15:29:54.566 -03:00 [INF] Executed DbCommand (14ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='e-commerce(api)' AND TABLE_NAME='__EFMigrationsHistory';
2023-10-10 15:29:54.578 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT 1 FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA='e-commerce(api)' AND TABLE_NAME='__EFMigrationsHistory';
2023-10-10 15:29:54.597 -03:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `MigrationId`, `ProductVersion`
FROM `__EFMigrationsHistory`
ORDER BY `MigrationId`;
2023-10-10 15:29:54.609 -03:00 [INF] Applying migration '20230922150346_CriandoTabelasCarrinhoDeComprasEProdutoNoCarrinho'.
2023-10-10 15:29:54.708 -03:00 [INF] Executed DbCommand (58ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `CentrosDeDistribuicao` MODIFY COLUMN `UF` varchar(2) CHARACTER SET utf8mb4 NOT NULL;
2023-10-10 15:29:54.734 -03:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `CentrosDeDistribuicao` MODIFY COLUMN `Numero` int unsigned NOT NULL;
2023-10-10 15:29:54.758 -03:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `CentrosDeDistribuicao` MODIFY COLUMN `CEP` varchar(8) CHARACTER SET utf8mb4 NOT NULL;
2023-10-10 15:29:54.773 -03:00 [INF] Executed DbCommand (15ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `CarrinhosDeCompras` (
    `Id` char(36) COLLATE ascii_general_ci NOT NULL,
    `ValorTotal` double NOT NULL,
    `Logradouro` longtext CHARACTER SET utf8mb4 NOT NULL,
    `Numero` int unsigned NOT NULL,
    `Complemento` longtext CHARACTER SET utf8mb4 NOT NULL,
    `Bairro` longtext CHARACTER SET utf8mb4 NOT NULL,
    `Cidade` longtext CHARACTER SET utf8mb4 NOT NULL,
    `UF` longtext CHARACTER SET utf8mb4 NOT NULL,
    `CEP` longtext CHARACTER SET utf8mb4 NOT NULL,
    CONSTRAINT `PK_CarrinhosDeCompras` PRIMARY KEY (`Id`)
) CHARACTER SET=utf8mb4;
2023-10-10 15:29:54.783 -03:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE TABLE `ProdutosNoCarrinho` (
    `CarrinhoDeComprasId` char(36) COLLATE ascii_general_ci NOT NULL,
    `ProdutoId` char(36) COLLATE ascii_general_ci NOT NULL,
    `Quantidade` int unsigned NOT NULL
) CHARACTER SET=utf8mb4;
2023-10-10 15:29:54.785 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `__EFMigrationsHistory` (`MigrationId`, `ProductVersion`)
VALUES ('20230922150346_CriandoTabelasCarrinhoDeComprasEProdutoNoCarrinho', '7.0.5');
2023-10-10 15:29:54.787 -03:00 [INF] Applying migration '20230922153614_UpdateTabelaProdutosNoCarrinhoId'.
2023-10-10 15:29:54.809 -03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP PROCEDURE IF EXISTS `POMELO_AFTER_ADD_PRIMARY_KEY`;
CREATE PROCEDURE `POMELO_AFTER_ADD_PRIMARY_KEY`(IN `SCHEMA_NAME_ARGUMENT` VARCHAR(255), IN `TABLE_NAME_ARGUMENT` VARCHAR(255), IN `COLUMN_NAME_ARGUMENT` VARCHAR(255))
BEGIN
	DECLARE HAS_AUTO_INCREMENT_ID INT(11);
	DECLARE PRIMARY_KEY_COLUMN_NAME VARCHAR(255);
	DECLARE PRIMARY_KEY_TYPE VARCHAR(255);
	DECLARE SQL_EXP VARCHAR(1000);
	SELECT COUNT(*)
		INTO HAS_AUTO_INCREMENT_ID
		FROM `information_schema`.`COLUMNS`
		WHERE `TABLE_SCHEMA` = (SELECT IFNULL(SCHEMA_NAME_ARGUMENT, SCHEMA()))
			AND `TABLE_NAME` = TABLE_NAME_ARGUMENT
			AND `COLUMN_NAME` = COLUMN_NAME_ARGUMENT
			AND `COLUMN_TYPE` LIKE '%int%'
			AND `COLUMN_KEY` = 'PRI';
	IF HAS_AUTO_INCREMENT_ID THEN
		SELECT `COLUMN_TYPE`
			INTO PRIMARY_KEY_TYPE
			FROM `information_schema`.`COLUMNS`
			WHERE `TABLE_SCHEMA` = (SELECT IFNULL(SCHEMA_NAME_ARGUMENT, SCHEMA()))
				AND `TABLE_NAME` = TABLE_NAME_ARGUMENT
				AND `COLUMN_NAME` = COLUMN_NAME_ARGUMENT
				AND `COLUMN_TYPE` LIKE '%int%'
				AND `COLUMN_KEY` = 'PRI';
		SELECT `COLUMN_NAME`
			INTO PRIMARY_KEY_COLUMN_NAME
			FROM `information_schema`.`COLUMNS`
			WHERE `TABLE_SCHEMA` = (SELECT IFNULL(SCHEMA_NAME_ARGUMENT, SCHEMA()))
				AND `TABLE_NAME` = TABLE_NAME_ARGUMENT
				AND `COLUMN_NAME` = COLUMN_NAME_ARGUMENT
				AND `COLUMN_TYPE` LIKE '%int%'
				AND `COLUMN_KEY` = 'PRI';
		SET SQL_EXP = CONCAT('ALTER TABLE `', (SELECT IFNULL(SCHEMA_NAME_ARGUMENT, SCHEMA())), '`.`', TABLE_NAME_ARGUMENT, '` MODIFY COLUMN `', PRIMARY_KEY_COLUMN_NAME, '` ', PRIMARY_KEY_TYPE, ' NOT NULL AUTO_INCREMENT;');
		SET @SQL_EXP = SQL_EXP;
		PREPARE SQL_EXP_EXECUTE FROM @SQL_EXP;
		EXECUTE SQL_EXP_EXECUTE;
		DEALLOCATE PREPARE SQL_EXP_EXECUTE;
	END IF;
END;
2023-10-10 15:29:54.815 -03:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `ProdutosNoCarrinho` ADD `Id` char(36) COLLATE ascii_general_ci NOT NULL DEFAULT '00000000-0000-0000-0000-000000000000';
2023-10-10 15:29:54.835 -03:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `ProdutosNoCarrinho` ADD CONSTRAINT `PK_ProdutosNoCarrinho` PRIMARY KEY (`Id`);
CALL POMELO_AFTER_ADD_PRIMARY_KEY(NULL, 'ProdutosNoCarrinho', 'Id');
2023-10-10 15:29:54.837 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `__EFMigrationsHistory` (`MigrationId`, `ProductVersion`)
VALUES ('20230922153614_UpdateTabelaProdutosNoCarrinhoId', '7.0.5');
2023-10-10 15:29:54.840 -03:00 [INF] Executed DbCommand (3ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP PROCEDURE `POMELO_AFTER_ADD_PRIMARY_KEY`;
2023-10-10 15:29:54.840 -03:00 [INF] Applying migration '20230922190548_CarrinhoDeComprasEProdutos'.
2023-10-10 15:29:54.855 -03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP PROCEDURE IF EXISTS `POMELO_BEFORE_DROP_PRIMARY_KEY`;
CREATE PROCEDURE `POMELO_BEFORE_DROP_PRIMARY_KEY`(IN `SCHEMA_NAME_ARGUMENT` VARCHAR(255), IN `TABLE_NAME_ARGUMENT` VARCHAR(255))
BEGIN
	DECLARE HAS_AUTO_INCREMENT_ID TINYINT(1);
	DECLARE PRIMARY_KEY_COLUMN_NAME VARCHAR(255);
	DECLARE PRIMARY_KEY_TYPE VARCHAR(255);
	DECLARE SQL_EXP VARCHAR(1000);
	SELECT COUNT(*)
		INTO HAS_AUTO_INCREMENT_ID
		FROM `information_schema`.`COLUMNS`
		WHERE `TABLE_SCHEMA` = (SELECT IFNULL(SCHEMA_NAME_ARGUMENT, SCHEMA()))
			AND `TABLE_NAME` = TABLE_NAME_ARGUMENT
			AND `Extra` = 'auto_increment'
			AND `COLUMN_KEY` = 'PRI'
			LIMIT 1;
	IF HAS_AUTO_INCREMENT_ID THEN
		SELECT `COLUMN_TYPE`
			INTO PRIMARY_KEY_TYPE
			FROM `information_schema`.`COLUMNS`
			WHERE `TABLE_SCHEMA` = (SELECT IFNULL(SCHEMA_NAME_ARGUMENT, SCHEMA()))
				AND `TABLE_NAME` = TABLE_NAME_ARGUMENT
				AND `COLUMN_KEY` = 'PRI'
			LIMIT 1;
		SELECT `COLUMN_NAME`
			INTO PRIMARY_KEY_COLUMN_NAME
			FROM `information_schema`.`COLUMNS`
			WHERE `TABLE_SCHEMA` = (SELECT IFNULL(SCHEMA_NAME_ARGUMENT, SCHEMA()))
				AND `TABLE_NAME` = TABLE_NAME_ARGUMENT
				AND `COLUMN_KEY` = 'PRI'
			LIMIT 1;
		SET SQL_EXP = CONCAT('ALTER TABLE `', (SELECT IFNULL(SCHEMA_NAME_ARGUMENT, SCHEMA())), '`.`', TABLE_NAME_ARGUMENT, '` MODIFY COLUMN `', PRIMARY_KEY_COLUMN_NAME, '` ', PRIMARY_KEY_TYPE, ' NOT NULL;');
		SET @SQL_EXP = SQL_EXP;
		PREPARE SQL_EXP_EXECUTE FROM @SQL_EXP;
		EXECUTE SQL_EXP_EXECUTE;
		DEALLOCATE PREPARE SQL_EXP_EXECUTE;
	END IF;
END;
2023-10-10 15:29:54.859 -03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP PROCEDURE IF EXISTS `POMELO_AFTER_ADD_PRIMARY_KEY`;
CREATE PROCEDURE `POMELO_AFTER_ADD_PRIMARY_KEY`(IN `SCHEMA_NAME_ARGUMENT` VARCHAR(255), IN `TABLE_NAME_ARGUMENT` VARCHAR(255), IN `COLUMN_NAME_ARGUMENT` VARCHAR(255))
BEGIN
	DECLARE HAS_AUTO_INCREMENT_ID INT(11);
	DECLARE PRIMARY_KEY_COLUMN_NAME VARCHAR(255);
	DECLARE PRIMARY_KEY_TYPE VARCHAR(255);
	DECLARE SQL_EXP VARCHAR(1000);
	SELECT COUNT(*)
		INTO HAS_AUTO_INCREMENT_ID
		FROM `information_schema`.`COLUMNS`
		WHERE `TABLE_SCHEMA` = (SELECT IFNULL(SCHEMA_NAME_ARGUMENT, SCHEMA()))
			AND `TABLE_NAME` = TABLE_NAME_ARGUMENT
			AND `COLUMN_NAME` = COLUMN_NAME_ARGUMENT
			AND `COLUMN_TYPE` LIKE '%int%'
			AND `COLUMN_KEY` = 'PRI';
	IF HAS_AUTO_INCREMENT_ID THEN
		SELECT `COLUMN_TYPE`
			INTO PRIMARY_KEY_TYPE
			FROM `information_schema`.`COLUMNS`
			WHERE `TABLE_SCHEMA` = (SELECT IFNULL(SCHEMA_NAME_ARGUMENT, SCHEMA()))
				AND `TABLE_NAME` = TABLE_NAME_ARGUMENT
				AND `COLUMN_NAME` = COLUMN_NAME_ARGUMENT
				AND `COLUMN_TYPE` LIKE '%int%'
				AND `COLUMN_KEY` = 'PRI';
		SELECT `COLUMN_NAME`
			INTO PRIMARY_KEY_COLUMN_NAME
			FROM `information_schema`.`COLUMNS`
			WHERE `TABLE_SCHEMA` = (SELECT IFNULL(SCHEMA_NAME_ARGUMENT, SCHEMA()))
				AND `TABLE_NAME` = TABLE_NAME_ARGUMENT
				AND `COLUMN_NAME` = COLUMN_NAME_ARGUMENT
				AND `COLUMN_TYPE` LIKE '%int%'
				AND `COLUMN_KEY` = 'PRI';
		SET SQL_EXP = CONCAT('ALTER TABLE `', (SELECT IFNULL(SCHEMA_NAME_ARGUMENT, SCHEMA())), '`.`', TABLE_NAME_ARGUMENT, '` MODIFY COLUMN `', PRIMARY_KEY_COLUMN_NAME, '` ', PRIMARY_KEY_TYPE, ' NOT NULL AUTO_INCREMENT;');
		SET @SQL_EXP = SQL_EXP;
		PREPARE SQL_EXP_EXECUTE FROM @SQL_EXP;
		EXECUTE SQL_EXP_EXECUTE;
		DEALLOCATE PREPARE SQL_EXP_EXECUTE;
	END IF;
END;
2023-10-10 15:29:54.880 -03:00 [INF] Executed DbCommand (21ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CALL POMELO_BEFORE_DROP_PRIMARY_KEY(NULL, 'ProdutosNoCarrinho');
ALTER TABLE `ProdutosNoCarrinho` DROP PRIMARY KEY;
2023-10-10 15:29:54.886 -03:00 [INF] Executed DbCommand (6ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `ProdutosNoCarrinho` DROP COLUMN `Id`;
2023-10-10 15:29:54.905 -03:00 [INF] Executed DbCommand (19ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `ProdutosNoCarrinho` ADD CONSTRAINT `PK_ProdutosNoCarrinho` PRIMARY KEY (`CarrinhoDeComprasId`, `ProdutoId`);
2023-10-10 15:29:54.915 -03:00 [INF] Executed DbCommand (10ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
CREATE INDEX `IX_ProdutosNoCarrinho_ProdutoId` ON `ProdutosNoCarrinho` (`ProdutoId`);
2023-10-10 15:29:54.939 -03:00 [INF] Executed DbCommand (24ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `ProdutosNoCarrinho` ADD CONSTRAINT `FK_ProdutosNoCarrinho_CarrinhosDeCompras_CarrinhoDeComprasId` FOREIGN KEY (`CarrinhoDeComprasId`) REFERENCES `CarrinhosDeCompras` (`Id`) ON DELETE CASCADE;
2023-10-10 15:29:54.965 -03:00 [INF] Executed DbCommand (26ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `ProdutosNoCarrinho` ADD CONSTRAINT `FK_ProdutosNoCarrinho_Produtos_ProdutoId` FOREIGN KEY (`ProdutoId`) REFERENCES `Produtos` (`Id`) ON DELETE CASCADE;
2023-10-10 15:29:54.967 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `__EFMigrationsHistory` (`MigrationId`, `ProductVersion`)
VALUES ('20230922190548_CarrinhoDeComprasEProdutos', '7.0.5');
2023-10-10 15:29:54.969 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP PROCEDURE `POMELO_BEFORE_DROP_PRIMARY_KEY`;
2023-10-10 15:29:54.972 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
DROP PROCEDURE `POMELO_AFTER_ADD_PRIMARY_KEY`;
2023-10-10 15:29:54.972 -03:00 [INF] Applying migration '20230926195150_AdicionandoColunaDeValorUnitarioEmProdutoNoCarrinho'.
2023-10-10 15:29:54.992 -03:00 [INF] Executed DbCommand (11ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `ProdutosNoCarrinho` ADD `ValorUnitario` double NOT NULL DEFAULT 0.0;
2023-10-10 15:29:54.994 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `__EFMigrationsHistory` (`MigrationId`, `ProductVersion`)
VALUES ('20230926195150_AdicionandoColunaDeValorUnitarioEmProdutoNoCarrinho', '7.0.5');
2023-10-10 15:29:54.995 -03:00 [INF] Applying migration '20230927144739_AlterandoNomeAtributoEmProdutosNoCarrinho'.
2023-10-10 15:29:55.011 -03:00 [INF] Executed DbCommand (7ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `ProdutosNoCarrinho` RENAME COLUMN `ValorUnitario` TO `ValorNoCarrinho`;
2023-10-10 15:29:55.013 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `__EFMigrationsHistory` (`MigrationId`, `ProductVersion`)
VALUES ('20230927144739_AlterandoNomeAtributoEmProdutosNoCarrinho', '7.0.5');
2023-10-10 15:29:55.013 -03:00 [INF] Applying migration '20230929153706_ValorTotal'.
2023-10-10 15:29:55.031 -03:00 [INF] Executed DbCommand (9ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
ALTER TABLE `CarrinhosDeCompras` DROP COLUMN `ValorTotal`;
2023-10-10 15:29:55.033 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
INSERT INTO `__EFMigrationsHistory` (`MigrationId`, `ProductVersion`)
VALUES ('20230929153706_ValorTotal', '7.0.5');
2023-10-10 15:34:08.024 -03:00 [INF] Inicialização da WEB API...
2023-10-10 15:34:08.207 -03:00 [INF] User profile is available. Using 'C:\Users\Cleartech\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2023-10-10 15:34:08.214 -03:00 [INF] Creating key {d73f1e6a-783e-4815-aadd-4a3d5bd6e87d} with creation date 2023-10-10 18:34:08Z, activation date 2023-10-10 18:34:08Z, and expiration date 2024-01-08 18:34:08Z.
2023-10-10 15:34:08.255 -03:00 [INF] Writing data to file 'C:\Users\Cleartech\AppData\Local\ASP.NET\DataProtection-Keys\key-d73f1e6a-783e-4815-aadd-4a3d5bd6e87d.xml'.
2023-10-10 15:34:08.473 -03:00 [INF] Now listening on: https://localhost:7296
2023-10-10 15:34:08.473 -03:00 [INF] Now listening on: http://localhost:5090
2023-10-10 15:34:08.476 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2023-10-10 15:34:08.476 -03:00 [INF] Hosting environment: Development
2023-10-10 15:34:08.476 -03:00 [INF] Content root path: C:\Users\Cleartech\OneDrive - Clearsale S.A\Área de Trabalho\ClearTech\Repositório\T4-ElvesMoura\Sprint 15\E-Commerce(API) - Rique\E-Commerce(API)\
2023-10-10 15:34:08.893 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7296/swagger - -
2023-10-10 15:34:08.959 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7296/swagger - - - 301 0 - 69.6059ms
2023-10-10 15:34:08.965 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7296/swagger/index.html - -
2023-10-10 15:34:09.175 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7296/swagger/index.html - - - 200 - text/html;charset=utf-8 210.2708ms
2023-10-10 15:34:09.177 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7296/swagger/swagger-ui-bundle.js - -
2023-10-10 15:34:09.177 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7296/swagger/swagger-ui-standalone-preset.js - -
2023-10-10 15:34:09.177 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7296/swagger/swagger-ui.css - -
2023-10-10 15:34:09.177 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7296/_framework/aspnetcore-browser-refresh.js - -
2023-10-10 15:34:09.179 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7296/_framework/aspnetcore-browser-refresh.js - - - 200 12362 application/javascript;+charset=utf-8 1.8722ms
2023-10-10 15:34:09.188 -03:00 [INF] Sending file. Request path: '/swagger-ui.css'. Physical path: 'N/A'
2023-10-10 15:34:09.189 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7296/swagger/swagger-ui.css - - - 200 143632 text/css 11.5089ms
2023-10-10 15:34:09.191 -03:00 [INF] Sending file. Request path: '/swagger-ui-standalone-preset.js'. Physical path: 'N/A'
2023-10-10 15:34:09.191 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7296/swagger/swagger-ui-standalone-preset.js - - - 200 337162 application/javascript 13.7785ms
2023-10-10 15:34:09.193 -03:00 [INF] Sending file. Request path: '/swagger-ui-bundle.js'. Physical path: 'N/A'
2023-10-10 15:34:09.193 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7296/swagger/swagger-ui-bundle.js - - - 200 1092889 application/javascript 15.3723ms
2023-10-10 15:34:09.196 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7296/_vs/browserLink - -
2023-10-10 15:34:09.230 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7296/_vs/browserLink - - - 200 - text/javascript;+charset=UTF-8 33.5729ms
2023-10-10 15:34:09.381 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7296/swagger/v1/swagger.json - -
2023-10-10 15:34:09.403 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7296/swagger/favicon-32x32.png - -
2023-10-10 15:34:09.403 -03:00 [INF] Sending file. Request path: '/favicon-32x32.png'. Physical path: 'N/A'
2023-10-10 15:34:09.404 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7296/swagger/favicon-32x32.png - - - 200 628 image/png 0.5544ms
2023-10-10 15:34:09.500 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7296/swagger/v1/swagger.json - - - 200 - application/json;charset=utf-8 119.1015ms
2023-10-10 15:38:25.006 -03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7296/Categoria?%22Nome%22=%22{{Categoria}}%22 application/json 34
2023-10-10 15:38:25.094 -03:00 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (admin|lojista)
2023-10-10 15:38:25.096 -03:00 [INF] AuthenticationScheme: Bearer was challenged.
2023-10-10 15:38:25.096 -03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7296/Categoria?%22Nome%22=%22{{Categoria}}%22 application/json 34 - 401 0 - 90.0100ms
2023-10-10 15:39:55.527 -03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7296/Categoria?%22Nome%22=%22{{Categoria}}%22 application/json 34
2023-10-10 15:39:55.646 -03:00 [INF] Executing endpoint 'E_Commerce_API_.Controllers.CategoriaController.CadastrarCategoria (E-Commerce(API))'
2023-10-10 15:39:55.663 -03:00 [INF] Route matched with {action = "CadastrarCategoria", controller = "Categoria"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult CadastrarCategoria(E_Commerce_API_.Data.DTOs.CategoriaDto.CreateCategoriaDto) on controller E_Commerce_API_.Controllers.CategoriaController (E-Commerce(API)).
2023-10-10 15:39:56.032 -03:00 [INF] Iniciando verificação do nome: '{{Categoria}}'.
2023-10-10 15:39:56.033 -03:00 [ERR] Erro: O nome '{{Categoria}}' não pode conter caracteres especiais.
2023-10-10 15:39:56.037 -03:00 [INF] Executed action E_Commerce_API_.Controllers.CategoriaController.CadastrarCategoria (E-Commerce(API)) in 370.7008ms
2023-10-10 15:39:56.037 -03:00 [INF] Executed endpoint 'E_Commerce_API_.Controllers.CategoriaController.CadastrarCategoria (E-Commerce(API))'
2023-10-10 15:39:56.043 -03:00 [ERR] Erro: {"TraceId":"3cb192cd-fc5e-4ef1-83cd-868dfb02d1ef","Error":{"Logref":"BadRequest","Message":"O nome não aceita caracteres especiais.","$type":"ErrorDetailsDto"},"Data":"10/10/2023","$type":"ErrorResponseDto"}
2023-10-10 15:39:56.067 -03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7296/Categoria?%22Nome%22=%22{{Categoria}}%22 application/json 34 - 400 - application/json 539.4627ms
2023-10-10 15:40:36.611 -03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7296/Categoria application/json 27
2023-10-10 15:40:36.613 -03:00 [INF] Executing endpoint 'E_Commerce_API_.Controllers.CategoriaController.CadastrarCategoria (E-Commerce(API))'
2023-10-10 15:40:36.613 -03:00 [INF] Route matched with {action = "CadastrarCategoria", controller = "Categoria"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult CadastrarCategoria(E_Commerce_API_.Data.DTOs.CategoriaDto.CreateCategoriaDto) on controller E_Commerce_API_.Controllers.CategoriaController (E-Commerce(API)).
2023-10-10 15:40:36.622 -03:00 [INF] Iniciando verificação do nome: 'Roupas'.
2023-10-10 15:40:36.622 -03:00 [INF] O nome está dentro dos critérios.
2023-10-10 15:40:36.623 -03:00 [INF] Foi requisitado um cadastro de categoria pelo usuário: 'db82dc95-bb75-47ba-84a6-8547ddb7c948'.
2023-10-10 15:40:36.623 -03:00 [INF] Iniciada adição de uma nova categoria: 'Roupas'.
2023-10-10 15:40:37.470 -03:00 [INF] Executed DbCommand (29ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`DataEHoraCriacao`, `c`.`DataEHoraModificacao`, `c`.`Nome`, `c`.`Status`
FROM `Categorias` AS `c`
2023-10-10 15:40:37.540 -03:00 [INF] Executed DbCommand (4ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `s`.`Id`, `s`.`CategoriaId`, `s`.`DataEHoraCriacao`, `s`.`DataEHoraModificacao`, `s`.`Nome`, `s`.`Status`
FROM `Subcategorias` AS `s`
2023-10-10 15:40:37.568 -03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Altura`, `p`.`CentroDeDistribuicaoId`, `p`.`Comprimento`, `p`.`DataEHoraCriacao`, `p`.`DataEHoraModificacao`, `p`.`Descricao`, `p`.`Largura`, `p`.`Nome`, `p`.`Peso`, `p`.`QuantidadeEmEstoque`, `p`.`Status`, `p`.`SubcategoriaId`, `p`.`Valor`
FROM `Produtos` AS `p`
2023-10-10 15:40:37.573 -03:00 [INF] Executed DbCommand (1ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`Bairro`, `c`.`CEP`, `c`.`Cidade`, `c`.`Complemento`, `c`.`DataEHoraCriacao`, `c`.`DataEHoraModificacao`, `c`.`Logradouro`, `c`.`Nome`, `c`.`Numero`, `c`.`Status`, `c`.`UF`
FROM `CentrosDeDistribuicao` AS `c`
2023-10-10 15:40:37.573 -03:00 [INF] Executed action E_Commerce_API_.Controllers.CategoriaController.CadastrarCategoria (E-Commerce(API)) in 960.1147ms
2023-10-10 15:40:37.573 -03:00 [INF] Executed endpoint 'E_Commerce_API_.Controllers.CategoriaController.CadastrarCategoria (E-Commerce(API))'
2023-10-10 15:40:37.573 -03:00 [ERR] Erro: {"TraceId":"9db3f658-ec7d-4974-8905-cbfdaa1e4fb2","Error":{"Logref":"BadRequest","Message":"O nome 'Roupas' já existe.","$type":"ErrorDetailsDto"},"Data":"10/10/2023","$type":"ErrorResponseDto"}
2023-10-10 15:40:37.577 -03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7296/Categoria application/json 27 - 400 - application/json 966.3535ms
2023-10-10 15:41:12.035 -03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7296/Categoria application/json 28
2023-10-10 15:41:12.035 -03:00 [INF] Executing endpoint 'E_Commerce_API_.Controllers.CategoriaController.CadastrarCategoria (E-Commerce(API))'
2023-10-10 15:41:12.036 -03:00 [INF] Route matched with {action = "CadastrarCategoria", controller = "Categoria"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult CadastrarCategoria(E_Commerce_API_.Data.DTOs.CategoriaDto.CreateCategoriaDto) on controller E_Commerce_API_.Controllers.CategoriaController (E-Commerce(API)).
2023-10-10 15:41:12.041 -03:00 [INF] Iniciando verificação do nome: 'Móveis'.
2023-10-10 15:41:12.041 -03:00 [INF] O nome está dentro dos critérios.
2023-10-10 15:41:12.042 -03:00 [INF] Foi requisitado um cadastro de categoria pelo usuário: 'db82dc95-bb75-47ba-84a6-8547ddb7c948'.
2023-10-10 15:41:12.042 -03:00 [INF] Iniciada adição de uma nova categoria: 'Móveis'.
2023-10-10 15:41:12.044 -03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`DataEHoraCriacao`, `c`.`DataEHoraModificacao`, `c`.`Nome`, `c`.`Status`
FROM `Categorias` AS `c`
2023-10-10 15:41:12.045 -03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `s`.`Id`, `s`.`CategoriaId`, `s`.`DataEHoraCriacao`, `s`.`DataEHoraModificacao`, `s`.`Nome`, `s`.`Status`
FROM `Subcategorias` AS `s`
2023-10-10 15:41:12.045 -03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `p`.`Id`, `p`.`Altura`, `p`.`CentroDeDistribuicaoId`, `p`.`Comprimento`, `p`.`DataEHoraCriacao`, `p`.`DataEHoraModificacao`, `p`.`Descricao`, `p`.`Largura`, `p`.`Nome`, `p`.`Peso`, `p`.`QuantidadeEmEstoque`, `p`.`Status`, `p`.`SubcategoriaId`, `p`.`Valor`
FROM `Produtos` AS `p`
2023-10-10 15:41:12.046 -03:00 [INF] Executed DbCommand (0ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT `c`.`Id`, `c`.`Bairro`, `c`.`CEP`, `c`.`Cidade`, `c`.`Complemento`, `c`.`DataEHoraCriacao`, `c`.`DataEHoraModificacao`, `c`.`Logradouro`, `c`.`Nome`, `c`.`Numero`, `c`.`Status`, `c`.`UF`
FROM `CentrosDeDistribuicao` AS `c`
2023-10-10 15:41:12.166 -03:00 [INF] Executed DbCommand (21ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (DbType = DateTime), @p2='?' (DbType = DateTime), @p3='?' (Size = 4000), @p4='?' (DbType = Boolean)], CommandType='"Text"', CommandTimeout='30']
SET AUTOCOMMIT = 1;
INSERT INTO `Categorias` (`Id`, `DataEHoraCriacao`, `DataEHoraModificacao`, `Nome`, `Status`)
VALUES (@p0, @p1, @p2, @p3, @p4);
2023-10-10 15:41:12.172 -03:00 [INF] Categoria com Id "fc44eeea-ec30-435a-b958-da1f09fd7b47" incluída no banco de dados.
2023-10-10 15:41:12.173 -03:00 [INF] Categoria cadastrada com sucesso.
2023-10-10 15:41:12.189 -03:00 [INF] Criado os links de acesso: [{"Href":"https://localhost:7296/Categoria/fc44eeea-ec30-435a-b958-da1f09fd7b47","Rel":"self","Method":"GET","Arguments":null,"$type":"LinkDto"},{"Href":"https://localhost:7296/Categoria/fc44eeea-ec30-435a-b958-da1f09fd7b47","Rel":"self","Method":"PUT","Arguments":["nome","status"],"$type":"LinkDto"},{"Href":"https://localhost:7296/Categoria/fc44eeea-ec30-435a-b958-da1f09fd7b47","Rel":"self","Method":"DELETE","Arguments":null,"$type":"LinkDto"}].
2023-10-10 15:41:12.191 -03:00 [INF] Executing CreatedAtActionResult, writing value of type 'E_Commerce_API_.Data.DTOs.Error.ResponseDto`1[[E_Commerce_API_.Data.DTOs.CategoriaDto.ReadCategoriaDto, E-Commerce(API), Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2023-10-10 15:41:12.206 -03:00 [INF] Executed action E_Commerce_API_.Controllers.CategoriaController.CadastrarCategoria (E-Commerce(API)) in 170.5989ms
2023-10-10 15:41:12.206 -03:00 [INF] Executed endpoint 'E_Commerce_API_.Controllers.CategoriaController.CadastrarCategoria (E-Commerce(API))'
2023-10-10 15:41:12.206 -03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7296/Categoria application/json 28 - 201 531 application/json;+charset=utf-8 171.4425ms
